<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>NOKIA</h1>
<button onclick="turnOn1()">Bật điện thoại</button>
<button onclick="turnOff1()">Tắt điện thoại</button>
<button onclick="text1()">Soạn tin nhắn</button>
<button onclick="receive1()">Nhận tin nhắn</button>
<button onclick="sendmessage1()">Gửi tin nhắn</button>
<button onclick="inbox1()">Hộp thư đến</button>
<button onclick="sendbox1()">Hộp thư đi</button>
<button onclick="charge1()">Sạc điện thoại</button>
<br>
<br>
<textarea id="display1" style="width: 300px; height: 100px"></textarea>
<br>
<br>
<br>
<br>
<br>
<h1>Apple</h1>
<button onclick="turnOn2()">Bật điện thoại</button>
<button onclick="turnOff2()">Tắt điện thoại</button>
<button onclick="text2()">Soạn tin nhắn</button>
<button onclick="receive2()">Nhận tin nhắn</button>
<button onclick="sendmessage2()">Gửi tin nhắn</button>
<button onclick="inbox2()">Hộp thư đến</button>
<button onclick="sendbox2()">Hộp thư đi</button>
<button onclick="charge2()">Sạc điện thoại</button>
<br>
<br>
<textarea id="display2" style="width: 300px; height: 100px"></textarea>

<script>
    let flag = true

    class Phone {
        constructor(namePhone, status, battery) {
            this.status = status;
            this.namePhone = namePhone;
            this.battery = battery;
            this.memoryText = [];
            this.memoryInbox = [];
            this.memorySendbox = [];
        }

        statusPhone() {
            this.battery--
            return this.status
        }

        charge() {
            while (this.battery <= 100) {
                this.battery = this.battery + 0.00001;
            }
            alert(this.battery)
        }

        turnOn() {
            alert("Điện thoại " + this.namePhone + " đang bật");
            this.status = true;

        }

        turnOff() {
            alert("Điện thoại " + this.namePhone + " đang tắt");
            this.status = false
        }

        text(phone) {
            if (this.status == true) {
                var message = prompt("Vui lòng nhập tin nhắn")
                if (confirm("Bạn có muốn gửi đến " + phone.namePhone + " tin nhắn : " + message)) {
                    this.memorySendbox.push(this.namePhone + " đã gửi tin nhắn: " + message)
                    phone.memoryInbox.push(this.namePhone + " đã gửi tin nhắn với nội dung : "  + message);
                } else {
                    this.memoryText.push(this.namePhone + " đã soạn tin nhắn:  " + message)
                }
                this.battery--
            }
        }

        receive(phone, message) {
            if (this.status == true) {
                alert("Bạn đã nhận 01 tin nhắn");
                this.memoryInbox.push(("Điện thoại: " + this.namePhone + " đã gửi tin/" +
                    "lời nhắn: " + message))
                this.battery--
                ;
            }
        }

        inbox(phone) {
            if (this.status == true) {
                if (phone1.memoryInbox) {
                    document.getElementById("display1").innerHTML = phone1.memoryInbox
                    this.battery--;
                }
                if (phone2.memoryInbox) {
                    document.getElementById("display2").innerHTML = phone2.memoryInbox
                    this.battery--;
                }
            }
        }

        sendBox(phone) {
            if (this.status == true) {
                if (phone1.memorySendbox) {
                    document.getElementById("display1").innerHTML = phone1.memorySendbox
                    this.battery--;
                }
                if (phone2.memorySendbox) {
                    document.getElementById("display2").innerHTML = phone2.memorySendbox
                    this.battery--;
                }
            }
        }

        send(phone) {
            if (this.status == true) {
                let data = "";
                for (let i = 0; i < this.memoryText.length; i++) {
                    data += i + ": " + this.memoryText[i];
                }
                let index = parseInt(prompt(data))
                this.memorySendbox.push("Đã gửi tin đến tên điện thoại: " + phone.namePhone + ",với lời nhắn: " + this.memoryText[index])
                phone.memoryInbox.push(this.namePhone, this.memoryText[index]);
                this.memoryText.splice(index, 1);
            }
        }
    }

    var phone1 = new Phone("Nokia", 0, 50);
    var phone2 = new Phone("Apple", 0, 50);

    function turnOn1() {
        alert(phone1.turnOn())
    }

    function turnOff1() {
        alert(phone1.turnOff())
    }

    function inbox1() {
        alert(phone1.inbox())
    }

    function text1() {
        alert(phone1.text(phone2))
    }

    function receive1() {
        alert(phone1.receive())
    }

    function sendmessage1() {
        alert(phone1.send(phone2))
    }

    function inbox1() {
        alert(phone1.inbox())
    }

    function sendbox1() {
        alert(phone1.sendBox())
    }

    function charge1() {
        alert("Bạn đang sạc điện thoại: " + phone1.namePhone)
        alert(phone1.charge())
    }

    function turnOn2() {
        alert(phone2.turnOn())
    }

    function turnOff2() {
        alert(phone2.turnOff())
    }

    function inbox2() {
        alert(phone2.inbox())
    }

    function text2() {
        alert(phone2.text(phone1))
    }

    function receive2() {
        alert(phone2.receive())
    }

    function sendmessage2() {
        alert(phone2.send(phone1))
    }

    function inbox2() {
        alert(phone2.inbox())
    }

    function sendbox2() {
        alert(phone2.sendBox())
    }

    function charge2() {
        alert("Bạn đang sạc điện thoại: " + phone2.namePhone)
        alert(phone2.charge())
    }

    console.log(phone1)
    console.log(phone2)

</script>
</body>
</html>